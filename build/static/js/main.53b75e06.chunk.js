(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),c=t.n(r),u=(t(19),t(2)),i=t(3),s=t.n(i),l="/api/persons",m=function(){return s.a.get(l).then((function(e){return e.data}))},f=function(e){return s.a.post(l,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},d=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.message,t=e.isError;if(null===n)return null;var a=t?"error":"notification";return o.a.createElement("div",{className:a},n)},g=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",null,o.a.createElement("div",null,"filter shown with",o.a.createElement("input",{value:e.filter,onChange:e.onChange()}))))},p=function(e){return o.a.createElement("form",{onSubmit:e.addName},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),o.a.createElement("div",null,"phone:"," ",o.a.createElement("input",{value:e.newPhone,onChange:e.handlePhoneChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},N=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,e.person.name," ",e.person.number," ",o.a.createElement("button",{id:e.person.id,onClick:function(){return b(e)}},"delete")))},b=function(e){d(e.person.id).then((function(){e.setNotificationMessage("".concat(e.person.name," deleted.")),m().then((function(n){e.setPersons(n)})),setTimeout((function(){e.setNotificationMessage(null)}),5e3)})).catch((function(){e.setIsError(!0),e.setNotificationMessage("".concat(e.person.name," was already deleted.")),m().then((function(n){e.setPersons(n)})),setTimeout((function(){e.setNotificationMessage(null),e.setIsError(!1)}),5e3)})),e.setNewName(""),e.setNewPhone("")},w=function(e){return o.a.createElement(o.a.Fragment,null,e.persons.map((function(n){return o.a.createElement(N,{key:n.id,person:n,setPersons:e.setPersons,persons:e.persons,setNotificationMessage:e.setNotificationMessage,setIsError:e.setIsError,setNewName:e.setNewName,setNewPhone:e.setNewPhone})})))},v=function(e){var n=Object(a.useState)([]),t=Object(u.a)(n,2),r=t[0],c=t[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),l=s[0],d=s[1],N=Object(a.useState)(""),b=Object(u.a)(N,2),v=b[0],O=b[1],P=Object(a.useState)(""),j=Object(u.a)(P,2),C=j[0],k=j[1],M=Object(a.useState)(null),S=Object(u.a)(M,2),I=S[0],y=S[1],T=Object(a.useState)(!1),F=Object(u.a)(T,2),x=F[0],B=F[1];Object(a.useEffect)((function(){m().then((function(e){c(e)}))}),[]);var J=r.filter((function(e){return e.name.toLowerCase().indexOf(C)>-1})),W=function(e){k(e.target.value)};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(g,{filter:C,onChange:function(){return W}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(p,{addName:function(e){e.preventDefault();var n={name:l,number:v};if(r.find((function(e){return e.name===l}))){var t=r.find((function(e){return e.name===l})).id;h(t,n).then((function(){y("Number for ".concat(l," changed.")),m().then((function(e){c(e)})),d(""),O(""),setTimeout((function(){y(null)}),5e3)})).catch((function(){B(!0),y("".concat(l," is no longer in the database.")),m().then((function(e){c(e)})),d(""),O(""),setTimeout((function(){y(null),B(!1)}),5e3)}))}else f(n).then((function(e){c(r.concat(e)),d(""),O("")})).catch((function(e){B(!0),y(e.response.data.error),d(""),O(""),setTimeout((function(){y(null),B(!1)}),5e3)}))},handleNameChange:function(e){d(e.target.value)},handlePhoneChange:function(e){O(e.target.value)},newName:l,newPhone:v}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(w,{setPersons:c,persons:J,setNotificationMessage:y,setIsError:B,setNewName:d,setNewPhone:O}),o.a.createElement(E,{message:I,isError:x}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.53b75e06.chunk.js.map